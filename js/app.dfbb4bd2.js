(function(e){function n(n){for(var o,r,a=n[0],d=n[1],i=n[2],l=0,f=[];l<a.length;l++)r=a[l],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&f.push(c[r][0]),c[r]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(e[o]=d[o]);s&&s(n);while(f.length)f.shift()();return u.push.apply(u,i||[]),t()}function t(){for(var e,n=0;n<u.length;n++){for(var t=u[n],o=!0,r=1;r<t.length;r++){var a=t[r];0!==c[a]&&(o=!1)}o&&(u.splice(n--,1),e=d(d.s=t[0]))}return e}var o={},r={app:0},c={app:0},u=[];function a(e){return d.p+"js/"+({about:"about"}[e]||e)+"."+{about:"3285cbfe","chunk-29b10b56":"0404d00e","chunk-2d0a406d":"59657b11","chunk-2d0ab565":"11984030","chunk-2d0b9d35":"64c97c4f","chunk-2d2102cc":"f54da53f","chunk-2d21b46e":"237326fe","chunk-2d21e1c5":"ad691bf1","chunk-2d2214b6":"7d159e25","chunk-2d22c48a":"6bfa996e","chunk-2d22d746":"9696e732","chunk-609c9662":"0146ddcc"}[e]+".js"}function d(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,d),t.l=!0,t.exports}d.e=function(e){var n=[],t={about:1};r[e]?n.push(r[e]):0!==r[e]&&t[e]&&n.push(r[e]=new Promise((function(n,t){for(var o="css/"+({about:"about"}[e]||e)+"."+{about:"657b0e91","chunk-29b10b56":"31d6cfe0","chunk-2d0a406d":"31d6cfe0","chunk-2d0ab565":"31d6cfe0","chunk-2d0b9d35":"31d6cfe0","chunk-2d2102cc":"31d6cfe0","chunk-2d21b46e":"31d6cfe0","chunk-2d21e1c5":"31d6cfe0","chunk-2d2214b6":"31d6cfe0","chunk-2d22c48a":"31d6cfe0","chunk-2d22d746":"31d6cfe0","chunk-609c9662":"31d6cfe0"}[e]+".css",c=d.p+o,u=document.getElementsByTagName("link"),a=0;a<u.length;a++){var i=u[a],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===o||l===c))return n()}var f=document.getElementsByTagName("style");for(a=0;a<f.length;a++){i=f[a],l=i.getAttribute("data-href");if(l===o||l===c)return n()}var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.onload=n,s.onerror=function(n){var o=n&&n.target&&n.target.src||c,u=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=o,delete r[e],s.parentNode.removeChild(s),t(u)},s.href=c;var h=document.getElementsByTagName("head")[0];h.appendChild(s)})).then((function(){r[e]=0})));var o=c[e];if(0!==o)if(o)n.push(o[2]);else{var u=new Promise((function(n,t){o=c[e]=[n,t]}));n.push(o[2]=u);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,d.nc&&l.setAttribute("nonce",d.nc),l.src=a(e);var f=new Error;i=function(n){l.onerror=l.onload=null,clearTimeout(s);var t=c[e];if(0!==t){if(t){var o=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;f.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",f.name="ChunkLoadError",f.type=o,f.request=r,t[1](f)}c[e]=void 0}};var s=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(n)},d.m=e,d.c=o,d.d=function(e,n,t){d.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},d.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,n){if(1&n&&(e=d(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(d.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)d.d(t,o,function(n){return e[n]}.bind(null,o));return t},d.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return d.d(n,"a",n),n},d.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},d.p="",d.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=n,i=i.slice();for(var f=0;f<i.length;f++)n(i[f]);var s=l;u.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"56d7":function(e,n,t){"use strict";t.r(n);t("d3b7"),t("ac1f"),t("5319"),t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("2b0e"),r=t("bc3a"),c=t.n(r),u=t("a7fe"),a=t.n(u),d=t("5f5b"),i=t("b1e0"),l=(t("f9e3"),t("2dd8"),t("8c4f")),f=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"home"},[t("div",{attrs:{id:"nav"}},[t("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" | "),t("router-link",{attrs:{to:"/about"}},[e._v("About")]),e._v(" | "),t("router-link",{attrs:{to:"/products"}},[e._v("產品列表")]),e._v(" | "),t("router-link",{attrs:{to:"/cart"}},[e._v("購物車")]),e._v(" | "),t("router-link",{attrs:{to:"/admin/orders"}},[e._v("後台")]),e._v(" | "),t("router-link",{attrs:{to:"/login"}},[e._v("登入")])],1),t("router-view")],1)},s=[],h={name:"Home"},p=h,b=t("2877"),m=Object(b["a"])(p,f,s,!1,null,null,null),v=m.exports;o["default"].use(l["a"]);var g=[{path:"/",component:v,redirect:"/products",children:[{path:"products",name:"products",component:function(){return t.e("about").then(t.bind(null,"e6dc"))},meta:{needLogin:!1}},{path:"about",component:function(){return t.e("chunk-2d22d746").then(t.bind(null,"f820"))},meta:{needLogin:!1}},{path:"cart",component:function(){return t.e("chunk-2d2102cc").then(t.bind(null,"b789"))},meta:{needLogin:!1}},{path:"order-detail",component:function(){return t.e("chunk-2d21e1c5").then(t.bind(null,"d3bb"))},meta:{needLogin:!1}},{path:"order-complete",component:function(){return t.e("chunk-2d2214b6").then(t.bind(null,"ca79"))},meta:{needLogin:!1}},{path:"product-detail/:id",component:function(){return t.e("chunk-609c9662").then(t.bind(null,"5f47"))},meta:{needLogin:!1}}]},{path:"/admin",component:function(){return t.e("chunk-2d0b9d35").then(t.bind(null,"3530"))},meta:{needLogin:!0},children:[{path:"products",component:function(){return t.e("chunk-2d21b46e").then(t.bind(null,"bea6"))},meta:{needLogin:!0}},{path:"orders",component:function(){return t.e("chunk-2d0ab565").then(t.bind(null,"159d"))},meta:{needLogin:!0}},{path:"coupons",component:function(){return t.e("chunk-2d22c48a").then(t.bind(null,"f329"))},meta:{needLogin:!0}},{path:"files",component:function(){return t.e("chunk-2d0a406d").then(t.bind(null,"054f"))},meta:{needLogin:!0}}]},{path:"/login",name:"Login",component:function(){return t.e("chunk-29b10b56").then(t.bind(null,"a55b"))}}],k=new l["a"]({routes:g}),y=k,_=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},w=[],L=(t("5c0b"),{}),E=Object(b["a"])(L,_,w,!1,null,null,null),O=E.exports;o["default"].config.productionTip=!1,o["default"].use(a.a,c.a),o["default"].use(d["a"]),o["default"].use(i["a"]),new o["default"]({router:y,render:function(e){return e(O)}}).$mount("#app");var j=function(){return new Promise((function(e,n){var t=document.cookie.replace(/(?:(?:^|.*;\s*)AUTH_TOKEN\s*=\s*([^;]*).*$)|^.*$/,"$1");o["default"].axios.defaults.headers.common.Authorization="Bearer ".concat(t),o["default"].axios.post("".concat("https://course-ec-api.hexschool.io/api","/auth/check"),{api_token:t}).then((function(t){console.log(t),t.data.success?e(t):n(t)})).catch((function(e){console.log(e),n(e)}))}))};y.beforeEach((function(e,n,t){e.meta.needLogin?j().then((function(e){console.log("beforeEach check passed",e),t()})).catch((function(n){console.log("beforeEach blocked",n),t({name:"Login",query:{redirect:e.fullPath}})})):(console.log("no need login"),t())}))},"5c0b":function(e,n,t){"use strict";var o=t("9c0c"),r=t.n(o);r.a},"9c0c":function(e,n,t){}});
//# sourceMappingURL=app.dfbb4bd2.js.map